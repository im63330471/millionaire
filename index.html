<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Who Wants to Be a Millionaire?</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.0/lib/p5.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; font-family: "Segoe UI", sans-serif; background: black; }
    canvas { display: block; margin: 0 auto; background: black; }
  </style>
</head>
<body>
  <script>
    // Base64 placeholder for Millionaire logo (replace with actual image)
    const LOGO_DATA = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACCCAMAAADQNkiAAAAA1BMVEW10NBjBBbqAAAAH0lEQVR4nO3BAQ0AAADCoPdPbQ43oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBLcQ8AAa0jZQAAAABJRU5ErkJggg==";

    // Base64 placeholder for background music (replace with actual audio)
    const BACKGROUND_MUSIC = "data:audio/mpeg;base64,//tQxAAABAFBMVEUx8JzPAAAAH0lEQVR4nO3BAQ0AAADCoPdPbQ43oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBLdQ8AAa0jZQAAAABJRU5ErkJggg==";

    // Game variables
    let questions = [
      {
        question: "What is the capital of France?",
        options: ["Paris", "Berlin", "Madrid", "Rome"],
        answer: "Paris"
      },
      {
        question: "Which planet is known as the Red Planet?",
        options: ["Earth", "Mars", "Jupiter", "Venus"],
        answer: "Mars"
      },
      {
        question: "What is the largest ocean on Earth?",
        options: ["Atlantic", "Indian", "Arctic", "Pacific"],
        answer: "Pacific"
      }
    ];

    let prizes = ["$100", "$200", "$500", "$1,000", "$2,000", "$4,000", "$8,000", "$16,000", "$32,000", "$64,000", "$125,000", "$250,000", "$500,000", "$1,000,000"];
    let currentQuestionIndex = 0;
    let selectedOption = null;
    let confirmedAnswer = false;
    let timeLeft = 30;
    let timerStart = 0;
    let gameState = "start"; // "start", "playing", "win", "lose"
    let usedLifelines = { fiftyFifty: false, askAudience: false };
    let logoImg;

    function preload() {
      logoImg = loadImage(LOGO_DATA);
    }

    function setup() {
      createCanvas(800, 600);
      textAlign(CENTER, CENTER);
      imageMode(CENTER);
      noStroke();
    }

    function draw() {
      background(0);
      if (gameState === "start") drawStartScreen();
      else if (gameState === "playing") drawGameScreen();
      else if (gameState === "win") drawWinScreen();
      else if (gameState === "lose") drawLoseScreen();
    }

    // START SCREEN
    function drawStartScreen() {
      fill(255, 215, 0);
      textSize(48);
      text("Who Wants to Be a Millionaire?", width/2, height/2 - 100);
      image(logoImg, width/2, height/2 - 200, 300, 100);
      fill(255);
      rect(width/2 - 100, height/2, 200, 60);
      fill(0);
      textSize(24);
      text("Start Game", width/2, height/2 + 30);
    }

    // GAME SCREEN
    function drawGameScreen() {
      drawPrizeLadder();
      drawQuestion();
      drawLifelines();
      drawTimer();
    }

    function drawPrizeLadder() {
      fill(255, 215, 0);
      textSize(18);
      for (let i = 0; i < prizes.length; i++) {
        let y = height - 20 - i * 30;
        text(prizes[i], width - 150, y);
        if (i === currentQuestionIndex) {
          fill(255, 215, 0);
          text("ðŸ‘‰", width - 170, y);
        }
      }
    }

    function drawQuestion() {
      let q = questions[currentQuestionIndex];
      fill(255);
      textSize(24);
      text(q.question, width/2, 120);

      // Options
      for (let i = 0; i < q.options.length; i++) {
        let y = 180 + i * 80;
        if (selectedOption === i) {
          fill(100, 100, 255); // Highlight color
        } else {
          fill(50);
        }
        rect(100, y, 600, 60, 10);
        fill(255);
        textSize(20);
        text(String.fromCharCode(65 + i) + ". " + q.options[i], width/2, y + 30);
      }
    }

    function drawLifelines() {
      // 50/50
      fill(usedLifelines.fiftyFifty ? 100 : 255);
      rect(100, 50, 150, 40);
      fill(0);
      text("50/50", 175, 70);

      // Ask the Audience
      fill(usedLifelines.askAudience ? 100 : 255);
      rect(300, 50, 200, 40);
      fill(0);
      text("Ask Audience", 400, 70);
    }

    function drawTimer() {
      let elapsed = (millis() - timerStart) / 1000;
      timeLeft = max(0, 30 - floor(elapsed));
      fill(255, 0, 0);
      textSize(24);
      text(`Time: ${timeLeft}s`, width - 200, 50);
    }

    // WIN/LOSE SCREENS
    function drawWinScreen() {
      background(0, 255, 0);
      fill(0);
      textSize(48);
      text("ðŸŽ‰ You Won $1,000,000!", width/2, height/2);
    }

    function drawLoseScreen() {
      background(255, 0, 0);
      fill(0);
      textSize(48);
      text("ðŸ’¥ Game Over", width/2, height/2);
    }

    // INPUT HANDLERS
    function mousePressed() {
      if (gameState === "start") {
        if (mouseX > width/2 - 100 && mouseX < width/2 + 100 &&
            mouseY > height/2 && mouseY < height/2 + 60) {
          gameState = "playing";
          timerStart = millis();
        }
      } else if (gameState === "playing") {
        // Lifeline clicks
        if (mouseY > 50 && mouseY < 90) {
          if (mouseX > 100 && mouseX < 250) useFiftyFifty();
          if (mouseX > 300 && mouseX < 500) useAskAudience();
        }

        // Option selection
        for (let i = 0; i < 4; i++) {
          let y = 180 + i * 80;
          if (mouseX > 100 && mouseX < 700 && mouseY > y && mouseY < y + 60) {
            if (selectedOption === i) {
              confirmAnswer(i);
            } else {
              selectedOption = i;
            }
          }
        }
      }
    }

    function useFiftyFifty() {
      if (usedLifelines.fiftyFifty) return;
      usedLifelines.fiftyFifty = true;
      let q = questions[currentQuestionIndex];
      let wrong = q.options.filter(opt => opt !== q.answer);
      let remove = [wrong[floor(random(wrong.length))], wrong[floor(random(wrong.length))]];
      q.options = q.options.filter(opt => opt === q.answer || !remove.includes(opt));
    }

    function useAskAudience() {
      if (usedLifelines.askAudience) return;
      usedLifelines.askAudience = true;
      let q = questions[currentQuestionIndex];
      alert(`Audience: ${floor(random(60, 80))}% say "${q.answer}"`);
    }

    function confirmAnswer(index) {
      let q = questions[currentQuestionIndex];
      if (q.options[index] === q.answer) {
        currentQuestionIndex++;
        selectedOption = null;
        if (currentQuestionIndex >= questions.length) {
          gameState = "win";
        }
        timerStart = millis(); // Reset timer
      } else {
        gameState = "lose";
      }
    }
  </script>
</body>
</html>
